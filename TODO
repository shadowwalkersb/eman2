boost include
D_GLIBCXX_USE_CXX11_ABI
warning off on

include_directories
  INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIR}/boost/compatibility/cpp_c_headers)


add_definitions:
   WARNING_FLAGS_ON
   WARNING_FLAGS_OFF
   DMEMDEBUG
   DMEMDEBUG2
   ENABLE_BOUNDS_CHECKING
   DNOMINMAX
   DIMAGEIO_CACHE
   DFFTW_PLAN_CACHING
   DFFT_CACHING
   DNATIVE_FFT
   ADD_DEFINITIONS(-D${VARIABLE})
	DBOOST_DISABLE_ASSERTS


_FLAGS:
	CMakeLists.txt top level





AIX


# for 64-bit large file support
ADD_DEFINITIONS(-D_LARGEFILE_SOURCE)
ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64)
ADD_DEFINITIONS(-D_LARGE_FILES)

INCLUDE(${CMAKE_ROOT}/Modules/CheckIncludeFiles.cmake)
INCLUDE(${CMAKE_ROOT}/Modules/CheckFunctionExists.cmake)
INCLUDE(${CMAKE_ROOT}/Modules/CheckTypeSize.cmake)

EMAN_CHECK_FUNCTION(fseek64 HAVE_FSEEK64)
EMAN_CHECK_FUNCTION(fseeko HAVE_FSEEKO)
EMAN_CHECK_FUNCTION(ftell64 HAVE_FTELL64)
EMAN_CHECK_FUNCTION(ftello HAVE_FTELLO)
# end for 64-bit large file support




High priority
5/30/17		PIF writer seems broken (Reggie McNulty)
2/29/16		jenni@harvard noticed no automasking in e2refinemulti! option ignored. no other masking done
2/2/16		Make sure split particles in e2refinesplit are being split correctly (matching maps)
2/2/16		slice view in 3d contrast doesn't adjust well for maps with strange density ranges (Pawel)
2/1/16		e2spt_average uses unmasked FSC for filter
2/1/16		e2spt_wedgefill option to use unaligned input particles, or something similar
11/01/15	matrix size 1x615 into 96 regions -> 615 jobs!?!? (simmx)
10/19/15	try/except around line 2599 in e2ctf. Related to whole micrograph curve ([8]), patched
10/19/15	2-D class-averages with alignment rather than PCA?
10/19/15	bad particle marking
10/12/15	mask biased refinement
10/12/15	mask biased refinement refine_split
9/30/15		Simple reference based autopicker with downsampling
9/30/15		Plot selection of data sets
9/23/15		Seriously, got to do something about centering.
7/22/12		Counting in filename entry in GUI (was taking a LOOONG time). Fix with new caching system.
8/2/12		More dimensions in tilt validate
7/13/13		Gauss boxer can't be run from GUI on second image without funny button series
2/20/14		Problem with pickling particles and MPI transport  :^((((
2/20/14		Bootstrapping in e2classaverage not working well tolc project
2/20/14		Finish e2motion
2/20/14		Eliminate simmx files
3/6/14		e2classaverage has hardcoded final aligner to reference, but imposes flips when it shouldn't happen
3/8/14		Found that smaller than recommended angular step can produce slight resolution improvement combined with sep. Need to write new reconstructor with angular smearing in some way to compensate for reduced sampling without over smearing resulting reconstruction.
3/29/14		e2refinevariance broken ?
6/12/14		per particle movie mode alignment
6/12/14		new particle picker
6/14/14		e2markbadptcl
6/11/15		fix --prefilt in e2refine_easy
6/11/15		Add breaksym to tree aigner
7/17/15		When converting to Relion/Frealign, icos symmetry orientation needs to be adjusted on the map

7/7/14		scale box locations
7/27/14		ctf interactive seems to autosave parameters without button press
7/27/14		ctf struct factor determination with oversampling messed up!!!

2/24/14		Save sets in imagemx control panel error (updateGL, update not defined ?)
2/20/14		Save plots as images, more features in 2-D plotting
2/20/14		Progress display integrated in projectmanager
7/22/12		2d plotting of 1d image in browser broken
8/1/12		New options for better masking during alignment and classification to make smoother alignment energy function
8/2/12		min/max not shown in browser info window
8/2/12		Update wiki output files for twostage, automaskalign options.
8/13/12		When 3D windows are closed, don't reuse them
8/14/12		monte-carlo initial model generator
8/17/12		Registration system in GUI

9/6/12		--maxshift seems to cause segfaults sometimes

10/5/12		Doesn't handle projects with >1000 files very gracefully (slow, ryr-open)
8/28/14		Background updater for metadata in file-browser

10/23/12	Euler display in refine_multi
10/24/12	Azimuthal filtering to remove 'hair'. "How to legally give a molecule a shave"
11/06/12	Use new particle centers to readjust box locations and rebox particles.
11/28/12	When class-averages get averaged, the header particle numbers in the average of averages is messed up
11/28/12	Need a good method for checking reference-free class-averages against reprojections

12/12/12	User-specified pre-processing/masking of particles
12/12/12	Euler display in browser
12/17/12	Remember despiking filter

Low priority
7/25/12		In orthographic projection in 3-D viewer, mouse wheel behavior is inverted
11/28/12	Fix EMAN1 CTF reader. Fails unit test
9/23/15		Show stack/ Filter tool only work on the first image in 3D stacks

Complete
4/21/16		New ctf.weight.autofilt averager for 2-D class-averaging. Auto data-based Wiener filter on each average.
3/26/16		Made "flatten" amplitude correction option added by M to be used in "auto" mode for high resolution.
3/26/16		Mode 5 make3d radial real space correction enabled. Improved masking based on radial max profile.
3/16		New movie alignment code in examples working very well!
10/12/15	usefilt like option (inputavg) added to e2refine_easy
9/23/15		10/10/15 Add highsym and other new programs to gui workflow
7/17/15		added 'single' orientation generator
7/17/15		made perturb default -> false for eman orientation generator
7/16/15		Updated align_nbest to work properly with python threads
2/12/15		xform.tocenter processor added, with pretty complex centering heuristics
1/15		Critical fix: 2D translate() was broken due to memcopy vs memmove use. was responsible for bad 2-d class averages
12/20/14	Critical fix: bad particle marking was partially broken. Could only mark bad one time
12/12/14	Added support for new FEI SER format revision
11/01/14	11/01/14	Fixed problem with 3D reconstruction. Was a normalization issue
10/31/14	added e2ptclvsmap for finding the best individual particles for each projection
10/29/14	10/29/14	Threaded parallelism for e2ctf autofitting
10/21/14	10/21/14	FourierAnl now fills corners. Added improved matchto option. calc_rad_dist double
10/20/14	10/20/14	ctf.weight averager added
10/17/14	e2procxml.py added for FSC processing
10/16/14	10/16/14	e2refine_easy classiter -> 0 or 1 when it makes sense. This was limiting resolution in some cases
10/6/14		Added e2proclst.py
9/28/14		9/25/14		Aligned class particle extraction
9/25/14		7/7/14		per-particle subunit subtraction for Chris
9/8/14		--box in e2evalimage now forces size
9/4/14		Added e2ctfsim
8/29/14		Fixed B-factor option in e2ctf
8/29/14		e2extractsubparticles for accurately eliminating part of a particle based on projections
8/14		9/1/14		Use whole micrograph for per-particle defocus determination (option)
7/2/14		e2runresmap added
6/18/14		e2ddd_particles added
5/15/14		e2emx for EMX support
???		Fix internationalization bug with Qt
4/7/14		Make e2.py work with current ipython versions, finally
2/20/14		Added --speed option
2/12/14		Fixed e2evalparticles finally !
11/22/13	Revamp CMakeList
11/22/13	Added slider for sequential viewing in 3D
11/22/13	Added mask.soft
7/13/13		Tweaked refine_easy parameters a bit more
7/13/13		7/11/13 Progress meter problem (was disabled by BDB cache test)
8/7/12		7/21/12	Add fastseed option to gui
8/5?/12		8/1/12	HDF file caching is leaving open pointers for other types
8/7/12		8/5/12	Progress bar save in filtertool
8/9/12		?/?/?	e2procpdb.py - Lin
9/27/12		2/26/13	3D fallback for old OpenGL - Lin
9/6/12		1/2013	Histogram normalization in image display - Lin
7/21/12		Automatic filter selection at ctf stage
7/21/12		BDB->HDF
7/21/12		Develop JSON files
7/22/12		Same mask for all projections ?
7/27/12		Can't browse BDB dictionary contents
9/13		Astigmatism ?
10/18/15	default isosurface threshold adjusted
10/15	6/12/14		isosurface color on mac (and other machines with older opengl). Why no newer opengl working on mac?
10/19/15	10/18/15	gauss_5 falloff?, dealt with this by expanding the --pad amount with some testing
2/2/16		2/3/16		tiled display of 2d image stack from MRCS file has funny contrast (C.J.)
4/15/16		anisotropy correction program added
4/16/16		Added euler_refine option for refining orientation of class-averages
5/12/16		Changed mode_5_slow to do a sort of rotational deblurring in Fourier space. Produces a high-pass filter effect as well. Not sure if it's really useful
6/1/16		New e2ctf_auto.py for automated CTF processing. Related improvements to workflow.
6/15/16		Fixed problem with slice normalization in e2initialmodel. Made some initial models really streaky and awful.
6/27/18		e2msa now uses sklearn, and provides a variety of other algorithms. The PCA routine in the Analyzer seems to be buggy in certain cases.
6/27/18		Muyuan discovered that the initial search orientations for the 3-D Tree aligner needed to be inverted to account for symmetry properly
6/29/18		New e2enrich.py working
